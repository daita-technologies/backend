StartAt: StartDebugFunction
States:
  StartDebugFunction:
    Type: Task
    Resource: 'arn:aws:states:::lambda:invoke'
    InputPath: $
    Parameters:
      FunctionName: '${StartDebugFunction}'
      Payload.$: $
    Next: RunECSTask
  RunECSTask:
    Type: Task
    Resource: arn:aws:states:::ecs:runTask.sync
    Parameters:
      # LaunchType: EC2    ### we use capacity provider to manage container instance
      Cluster: ${AITaskECSClusterArn}
      TaskDefinition: ${AITaskDefinitionArn}
      NetworkConfiguration:
        AwsvpcConfiguration:
          Subnets: !Join [ ${LsPrivateSubnetIDs} ]
          SecurityGroups: !Join [ ${SecurityGroupIds} ]
          # AssignPublicIp: ENABLED
    End: true
TimeoutSeconds: 6000